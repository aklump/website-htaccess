#
#  This is an advanced example configuration file with descriptions.
#

# You may include a header that appears at the top of the compiled file.  You
# may use \n in your string here.
header: This file is autogenerated; do not modify.

# You must define at least one file configuration, but may have as many as are
# necessary.  Each item generates a single .htaccess file.
files:

  # This section configures generation of our Drupal 7 webroot .htaccess file
  # for the production/live website.
  prod_webroot:

    # A title to describe this section to adminstrators.
    title: Production .htaccess for Drupal 7 webroot

    # Required.  At least one valid hostname including http or https protocol.
    # List the hosts the $output file will be operating under. This/these
    # values are used to auto-detect force_ssl and www_prefix settings, unless
    # overridden as shown below.
    valid_hosts:
      - https://www.my-project.edu
      - https://www.d8.my-project.edu

    # The path where the output file will be generated.
    output: web/.htaccess.prod

    # A list of source files to merge together.  They are merged in the order as
    # listed.
    source:
      # This is another autogenerated file that is > 3000 lines of banned IPs.
      - apache/.htaccess.banned_ips

      # We should add any customizations to this file.
      - apache/webroot/.htaccess.custom

      # This will pull in the master branch 7.x .htaccess file.
      - https://raw.githubusercontent.com/drupal/drupal/7.x/.htaccess

    # Set true or false.  True will strip comment lines except header.  False
    # will leave them alone.
    remove_comments: true

    # Since our website is Drupal 7, we want to fast 404 common wordpress paths
    # so that Drupal doesn't have to bootstrap nor handle them.
    ban_wordpress: true

    # OPTIONAL OVERRIDE to the auto-detected setting based on valid_hosts.  See
    # README.md for more info.  Set this to 'true' to make sure the site is
    # served over HTTPS.
    force_ssl: true

    # OPTIONAL OVERRIDE to the auto-detected setting based on valid_hosts.  See
    # README.md for more info.  Set this to either 'add' or 'remove' to handle
    # the "www" prefix on the domain.  'add' will ensure that "www." appears in
    # the domain; "remove" will take it away.
    www_prefix: remove

  # This section configures generation of our Drupal 7 webroot .htaccess file
  # for the staging website.
  staging_webroot:
    title: Staging .htaccess for Drupal 7 webroot
    output: web/.htaccess.staging
    source:
      - apache/webroot/.htaccess.custom
      - https://raw.githubusercontent.com/drupal/drupal/7.x/.htaccess

    # This key allows us to list out IPs to ban.  The values here will be used
    # to generate "deny from" code so feel free to use full IPs or partial ones.
    ban_ips:
      - 192.236.147.204
      - 192.237.210.209
      - 192.239.12.141

    # This will add the http_auth code.  You must still generate the password
    # file manually.  See
    # https://httpd.apache.org/docs/current/programs/htpasswd.html for more
    # info.
    http_auth:

      # This will appear in the Apache password box.
      title: Staging Server

      # The absolute path on the server to the password file that you generated
      # using the htpasswd command.
      user_file: /var/www/passwords

      # You may whitelist any IPs that should not have to log in.
      whitelist:
        - 127.127.127.127
        - 127.127.127.128
